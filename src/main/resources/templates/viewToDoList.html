<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

                    <!-- Everything is from the Todo list video -->

<head>

    <meta charset="UTF-8">
    <title>View ToDo Item List</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>

    <link rel="stylesheet" href="path/to/toastr.min.css">

    <!-- Include locally stored Toastr JS -->
    <script src="path/to/toastr.min.js"></script>

    <style>
        a {
            color: white;
        }

        a:hover {
            color: white;
            text-decoration: none;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="container">
        <h1 class="p-3">
            ToDo Item List
            <button type="button" class="btn btn-danger" style="float: right;">
                <a th:href="@{/logout}">Logout</a>
            </button>
            <span th:text="${username}" style="margin-right: 10px;"></span>
        </h1>
    <table class="table table-bordered">
        <tr>
            <th>Id</th>
            <th>Title</th>
            <th>Date</th>
            <th>Status</th>
            <th>Mark Completed</th>
            <th>Edit</th>
            <th>Delete</th>
        </tr>
            <tr th:each="user : ${user}">
                <tr th:each="todo : ${list}">
                <td th:text="${todo.id}"></td>
                <td th:text="${todo.title}"></td>
                <td th:text="${todo.date}"></td>
                <td th:text="${todo.status}"></td>
                <td>
                    <button type="button" class="btn btn-success">
                        <a th:href="@{'/updateToDoStatus/' + ${todo.id}}">Mark Complete</a>
                    </button>
                </td>
                <td>
                    <button type="button" class="btn btn-primary">
                        <a th:href="@{'/editToDoItem/' + ${todo.id}}">Edit</a>
                    </button>
                </td>
                <td>
                    <button type="button" class="btn btn-danger"
                            onclick="if (! (confirm('Are you sure you want to delete this task?'))) return false">
                        <a th:href="@{'/deleteToDoItem/' + ${todo.id}}">Delete</a>
                    </button>
                </td>
                </tr>
            </tr>
    </table>
    <button type="button" class="btn btn-primary btn-block">
        <a th:href="@{/addToDoItem}">Add New ToDo Item</a>
    </button>
    </div>
</div>

<!-- Toastr notifications -->
<div id="toastr-notification" class="toast">
    <div id="toast-content"></div>
</div>



<script th:inline="javascript">
    window.onload = function() {
        var msg = /*[[${message}]]*/ "";

        if (msg === "Save Success") {
            toastr["success"]("Item added successfully!!");
        } else if (msg === "Delete Success") {
            toastr["success"]("Item deleted successfully!!");
        } else if (msg === "Delete Failure") {
            toastr["error"]("Some error occurred, couldn't delete item");
        } else if (msg === "Edit Success") {
            toastr["success"]("Item updated successfully!!");
        }

        toastr.options = {
            "closeButton": true,
            "debug": false,
            "newestOnTop": false,
            "progressBar": true,
            "positionClass": "toast-top-right",
            "preventDuplicates": false,
            "showDuration": "300",
            "hideDuration": "1000",
            "timeOut": "5000",
            "extendedTimeOut": "1000",
            "showEasing": "swing",
            "hideEasing": "linear",
            "showMethod": "fadeIn",
            "hideMethod": "fadeOut"
        };
    }
</script>
</body>
</html>
